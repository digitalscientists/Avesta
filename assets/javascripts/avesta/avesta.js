var Avesta={cities:[],templates:{},collectTemplates:function(){var e=this;$("script[type='text/template']").each(function(t,n){e.templates[n.getAttribute("name")]=_.template(n.innerHTML)})},prepareData:function(){var e=this;this.data.forEach(function(t){e.cities.push(t.city),t.amenities=[],t.features=[],t.numBeds=[],t.numBaths=[],t.minRent=[],t.maxRent=[];for(var n=1;n<=23;n++)t["features"+n]&&t.features.push(t["features"+n]),t["amenities"+n]&&t.amenities.push(t["amenities"+n]);for(var r in t)if(r.match(/^bed/)&&t[r]){var i=r.split("-");t.numBeds.push(i[1]),t.numBaths.push(i[3]),t[i[4]+"Rent"].push(t[r])}t.numBeds=_.uniq(t.numBeds.sort(),!0),t.numBaths=_.uniq(t.numBaths.sort(),!0),t.minRent=_.uniq(t.minRent.sort(),!0),t.maxRent=_.uniq(t.maxRent.sort(),!0)}),e.cities=_.uniq(e.cities.sort(),!0)},renderResults:function(e){$("#search-results").length&&$("#search-results").html(this._render("search-results",{city:(e[0]||{}).city,state:"FL",results:e}))},_render:function(e,t){return this.templates[e](t)},initialize:function(){this.collectTemplates()}};