Avesta.Map={initialize:function(){var e={center:new google.maps.LatLng(28.62219,-81.415708),zoom:8,mapTypeId:google.maps.MapTypeId.TERRAIN};this.map=new google.maps.Map(document.getElementById("map-canvas"),e),this.bounds=new google.maps.LatLngBounds,this.Marker.prototype=new google.maps.OverlayView,this.Marker.prototype.onAdd=function(){this.div=document.createElement("div"),this.div.className="marker",this.div.innerHTML=this.number,this.getPanes().overlayMouseTarget.appendChild(this.div);var e=this;google.maps.event.addDomListener(this.div,"click",function(){google.maps.event.trigger(e,"click")})},this.Marker.prototype.draw=function(){var e=this.getProjection(),t=e.fromLatLngToDivPixel(this.bounds.getSouthWest());this.div.style.left=t.x-19+"px",this.div.style.top=t.y-27+"px"},this.Marker.prototype.onRemove=function(){this.div.parentNode.removeChild(this.div),this.div=null}},markers:[],addMarkers:function(e){this.clearMarkers();var t=this,n=0;_.each(e,function(e){var r=e.latlng.split(","),s=new google.maps.LatLng(parseFloat(r[0]),parseFloat(r[1])),o=new google.maps.LatLngBounds(s,s),u=new t.Marker(o,t.map,++n);e.infoWindow=new google.maps.InfoWindow({content:Avesta._render("map-info-window",e),position:s,pixelOffset:new google.maps.Size(0,-30)}),google.maps.event.addDomListener(u,"click",function(){e.infoWindow.open(t.map)}),t.markers.push(u),t.bounds.extend(s)}),t.map.fitBounds(t.bounds)},clearMarkers:function(){this.bounds=new google.maps.LatLngBounds,_.each(this.markers,function(e){e.setMap(null),e=null})}},Avesta.Map.Marker=function(e,t,n){this.bounds=e,this.number=n,this.setMap(t)};